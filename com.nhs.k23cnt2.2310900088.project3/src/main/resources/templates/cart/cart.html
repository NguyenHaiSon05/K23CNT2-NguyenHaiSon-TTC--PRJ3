<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Gi·ªè H√†ng</title>
    <link rel="stylesheet" th:href="@{/css/cart/cart.css}">
    <link rel="stylesheet" th:href="@{/css/layout/footer.css}">
</head>

<body>

<!-- Header -->
<div th:replace="layout/header :: header"></div>

<div class="cart-container">

    <h2 class="cart-title">GI·ªé H√ÄNG C·ª¶A B·∫†N</h2>

    <!-- Gi·ªè tr·ªëng -->
    <div class="cart-empty" th:if="${#lists.isEmpty(cartItems)}">
        <p>Gi·ªè h√†ng c·ªßa b·∫°n ƒëang tr·ªëng</p>
        <a href="/" class="btn-continue">TI·∫æP T·ª§C MUA S·∫ÆM</a>
    </div>

    <!-- C√≥ s·∫£n ph·∫©m -->
    <table class="cart-table" th:if="${!#lists.isEmpty(cartItems)}">
        <thead>
        <tr>
            <th class="col-product">S·∫£n ph·∫©m</th>
            <th class="col-price">Gi√°</th>
            <th class="col-qty">S·ªë l∆∞·ª£ng</th>
            <th class="col-total">T·ªïng</th>
            <th class="col-remove">X√≥a</th>
        </tr>
        </thead>

        <tbody>
        <tr class="cart-row" th:each="item : ${cartItems}">
            <!-- C·ªôt S·∫£n ph·∫©m -->
            <td>
                <div class="product-box">
                    <img th:src="@{${item.product.image}}" class="cart-img">
                    <span th:text="${item.product.name}"></span>
                </div>
            </td>

            <!-- C·ªôt Gi√° -->
            <td class="price" th:text="${item.product.price} + 'ƒë'"></td>
            <!--S·ªë l∆∞·ª£ng-->
            <td class="qty">
                <form th:action="@{/cart/update}" method="post">
                    <input type="hidden" name="itemId" th:value="${item.id}">
                    <input type="number"
                           name="quantity"
                           min="1"
                           th:value="${item.quantity}"
                           onchange="this.form.submit()"
                           class="qty-input">
                </form>
            </td>


            <td class="total" th:text="${item.quantity * item.product.price} + 'ƒë'"></td>

            <td class="remove">
                <a th:href="@{'/cart/remove/' + ${item.id}}"
                   onclick="return confirm('X√≥a s·∫£n ph·∫©m n√†y?')"
                   class="remove-btn">√ó</a>
            </td>
        </tr>
        </tbody>
    </table>

    <form th:action="@{/apply-coupon}" method="post" class="coupon-form">
        <input type="text" name="code" placeholder="Nh·∫≠p m√£ gi·∫£m gi√°">
        <button type="submit">√Åp d·ª•ng</button>
    </form>

    <p th:if="${discount > 0}">
        üéâ ƒê√£ gi·∫£m: <b th:text="${discount}"></b> %
    </p>


    <!-- T·ªïng -->
    <div class="cart-total" th:if="${!#lists.isEmpty(cartItems)}">
        <span>T·ªïng thanh to√°n:</span>
        <span class="total-price" th:text="${totalPrice} + 'ƒë'"></span>
        <a href="/checkout" class="btn-checkout">THANH TO√ÅN</a>
    </div>

</div>

<!-- Footer -->


</body>
</html>
