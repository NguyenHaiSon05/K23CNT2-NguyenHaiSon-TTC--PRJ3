<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Qu·∫£n l√Ω ƒë∆°n h√†ng - Admin Panel</title>
    <link rel="stylesheet" th:href="@{/css/admin/admin.css}">
    <link rel="stylesheet" th:href="@{/css/admin/orders.css}">
</head>
<body>

<div th:replace="admin/layout/header :: adminHeader"></div>

<div style="display: flex; min-height: 100vh;">

    <div th:replace="admin/layout/sidebar :: sidebar"></div>

    <main style="flex: 1; padding: 30px; background-color: #f9fafb;">

        <div class="page-header">
            <div>
                <h2 class="page-title">üõí Qu·∫£n l√Ω ƒë∆°n h√†ng</h2>
                <p class="page-subtitle">Theo d√µi v√† x·ª≠ l√Ω c√°c ƒë∆°n ƒë·∫∑t h√†ng t·ª´ kh√°ch</p>
            </div>
        </div>

        <div class="table-container">
            <table class="custom-table">
                <thead>
                <tr>
                    <th width="80">M√£ ƒë∆°n</th>
                    <th>Kh√°ch h√†ng</th>
                    <th>Thanh to√°n</th>
                    <th>T·ªïng ti·ªÅn</th>
                    <th>Tr·∫°ng th√°i hi·ªán t·∫°i</th>
                    <th width="220">C·∫≠p nh·∫≠t tr·∫°ng th√°i</th>
                </tr>
                </thead>

                <tbody>
                <tr th:each="o : ${orders}">
                    <td>
                        <span class="order-id" th:text="'#' + ${o.orderId}"></span>
                    </td>

                    <td>
                        <div style="font-weight: 600; color: #333;" th:text="${o.fullName}"></div>
                        <div style="font-size: 12px; color: #888;">09xxxx (SƒêT)</div> </td>

                    <td>
                        <span class="badge-payment" th:text="${o.paymentMethod}"></span>
                    </td>

                    <td class="price-cell"
                        th:text="${#numbers.formatDecimal(o.totalAmount, 0, 'COMMA', 0, 'POINT')} + ' ƒë'">
                    </td>

                    <td>
                        <span class="status-badge"
                              th:classappend="'status-' + ${o.status.name()}"
                              th:text="${o.status.label}">
                        </span>
                    </td>

                    <td>
                        <form class="update-form"
                              th:action="@{/admin/orders/update-status}"
                              method="post">

                            <input type="hidden" name="orderId" th:value="${o.orderId}"/>

                            <select name="status" class="status-select">
                                <option th:each="s : ${T(com.freshfruit.nhsentity.OrderStatus).values()}"
                                        th:value="${s}"
                                        th:selected="${s == o.status}"
                                        th:text="${s.label}"> </option>
                            </select>

                            <button type="submit" class="btn-update" title="C·∫≠p nh·∫≠t tr·∫°ng th√°i">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="20 6 9 17 4 12"></polyline>
                                </svg>
                            </button>
                        </form>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

    </main>
</div>

</body>
</html>